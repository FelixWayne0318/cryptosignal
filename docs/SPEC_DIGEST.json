{
  "metadata": {
    "generated": "2025-11-01",
    "version": "v2.0",
    "source_files": [
      "newstandards/STANDARDS.md",
      "newstandards/MODULATORS.md",
      "newstandards/PUBLISHING.md",
      "newstandards/DATA_LAYER.md",
      "newstandards/NEWCOIN_SPEC.md",
      "newstandards/SCHEMAS.md"
    ],
    "compliance_target": "8/8 requirements"
  },
  "hard_constraints": {
    "multi_directional_symmetry": true,
    "dataqual_threshold": 0.9,
    "dataqual_critical": 0.88,
    "ws_connections_max": 5,
    "ws_connections_recommended": 3,
    "fi_modulator_isolation": true,
    "ev_positive_gate": true,
    "shadow_run_only": true
  },
  "standardization_chain": {
    "steps": [
      {
        "step": 1,
        "name": "pre_smoothing",
        "formula": "x̃_t = α·x_t + (1-α)·x̃_{t-1}",
        "alpha": 0.15
      },
      {
        "step": 2,
        "name": "robust_scaling",
        "formula": "z = (x̃ - μ_ew) / (1.4826 * MAD_ew)",
        "scale_factor": 1.4826
      },
      {
        "step": 3,
        "name": "soft_winsor",
        "formula": "z_soft = soft_winsor(z, z0, zmax, λ)",
        "z0": 2.5,
        "zmax": 6.0,
        "lambda": 1.5
      },
      {
        "step": 4,
        "name": "compression",
        "formula": "s_k = 100 · tanh(z_soft / τ)",
        "tau": 3.0
      },
      {
        "step": 5,
        "name": "publish_filter",
        "formula": "s_pub = smooth_with_hysteresis(s_k, αs, Δmax)",
        "alpha_s": 0.15
      }
    ],
    "required_for": "ALL A-layer factors (T, M, C, S, V, O, L, B, Q, I, F)"
  },
  "fi_modulation": {
    "F_factor": {
      "affects": [
        "Teff",
        "cost",
        "thresholds"
      ],
      "forbidden": [
        "S_score",
        "direction",
        "scorecard_weights"
      ],
      "formula": "Teff = clip(T0 * (1 + βF·gF) / (1 + βI·gI), Tmin, Tmax)",
      "beta_F": 0.3,
      "beta_I": 0.2
    },
    "I_factor": {
      "affects": [
        "Teff",
        "cost",
        "thresholds"
      ],
      "penalty_formula": "pen_I = θI · |gI|",
      "theta_I": 0.05
    }
  },
  "four_gates": {
    "impact": {
      "standard_threshold_bps": 7.0,
      "newcoin_threshold_bps": 15.0,
      "formula": "impact_bps ≤ threshold"
    },
    "spread": {
      "threshold_bps": 35.0,
      "formula": "spread_bps ≤ 35"
    },
    "obi": {
      "threshold": 0.3,
      "formula": "|OBI| ≤ 0.30"
    },
    "dataqual": {
      "prime_threshold": 0.9,
      "critical_threshold": 0.88,
      "formula": "DataQual = 1 - (0.35·miss + 0.15·ooOrder + 0.20·drift + 0.30·mismatch)"
    }
  },
  "publishing_rules": {
    "probability": {
      "prime_entry": 0.8,
      "prime_maintain": 0.7,
      "watch_entry": 0.5,
      "watch_maintain": 0.4
    },
    "anti_jitter": {
      "hysteresis": true,
      "persistence_K": 2,
      "persistence_N": 3,
      "cooldown_seconds": 90
    },
    "ev_gate": {
      "formula": "EV = P_long · payoff_win + P_short · payoff_loss",
      "threshold": 0.0,
      "enforcement": "EV > 0 required for PRIME"
    }
  },
  "data_layer": {
    "ws_topology": {
      "max_connections": 5,
      "recommended": 3,
      "streams": [
        "kline_1h",
        "kline_4h",
        "aggTrade",
        "depth@100ms",
        "markPrice"
      ]
    },
    "dataqual_components": {
      "miss_weight": 0.35,
      "ooOrder_weight": 0.15,
      "drift_weight": 0.2,
      "mismatch_weight": 0.3
    }
  },
  "newcoin_spec": {
    "classification": {
      "newcoin_threshold_days": 14,
      "newcoin_threshold_bars": 400,
      "tiers": [
        "Ignition",
        "Momentum",
        "Exhaustion",
        "Standard"
      ]
    },
    "special_handling": {
      "T0": 60,
      "TTL_hours": 3,
      "concurrency": 1,
      "intervals": [
        "1m",
        "5m",
        "15m"
      ]
    }
  },
  "compliance_checkpoints": [
    {
      "id": "CP1",
      "name": "Standardization Chain",
      "critical": true,
      "file_scope": "ats_core/factors_v2/*.py, ats_core/features/*.py"
    },
    {
      "id": "CP2",
      "name": "F/I Modulator Isolation",
      "critical": true,
      "file_scope": "ats_core/pipeline/analyze_symbol.py"
    },
    {
      "id": "CP3",
      "name": "Four Hard Gates",
      "critical": true,
      "file_scope": "ats_core/gates/integrated_gates.py"
    },
    {
      "id": "CP4",
      "name": "Publishing Anti-Jitter",
      "critical": true,
      "file_scope": "scripts/realtime_signal_scanner.py"
    },
    {
      "id": "CP5",
      "name": "WS Connection Limit",
      "critical": false,
      "file_scope": "ats_core/data/realtime_kline.py"
    },
    {
      "id": "CP6",
      "name": "DataQual Calculation",
      "critical": true,
      "file_scope": "ats_core/data/quality.py"
    },
    {
      "id": "CP7",
      "name": "Newcoin Special Handling",
      "critical": false,
      "file_scope": "ats_core/pipeline/analyze_symbol.py"
    },
    {
      "id": "CP8",
      "name": "EV > 0 Gate",
      "critical": true,
      "file_scope": "ats_core/gates/integrated_gates.py"
    }
  ]
}