# 新币处理策略（完整版）

## 🆕 **核心理念**

**抓住上线第1小时的机会，但用超严格标准控制风险**

---

## 📊 **4级分级体系**

| 阶段 | 币龄 | 数据要求 | 概率门槛 | 维度要求 | 单维度门槛 | Watch | 说明 |
|------|------|---------|---------|---------|----------|-------|-----|
| **🆕⚡ 超新** | 1-24小时 | 10根1h | **70%** | **6维>=70** | **70分** | ❌ | 超级谨慎 |
| **🆕 阶段A** | 1-7天 | 30根1h | **65%** | **5维>=65** | **65分** | ❌ | 极度谨慎 |
| **🆕 阶段B** | 7-30天 | 50根1h | **63%** | **4维>=65** | **65分** | ❌ | 谨慎 |
| **✅ 成熟** | 30天+ | 50根1h | **62%** | **4维>=65** | **65分** | ✅ | 正常 |

---

## ⏰ **时间轴详解**

### **上线第1小时 → Overlay自动检测**

```
00:00 币安上币
00:01 第1根1分钟K线
  ↓
01:00 第1根1小时K线完成
  ├─ Overlay自动扫描
  ├─ 检测条件:
  │   • 24h成交额 >= 1000万USDT
  │   • 至少1根1h K线
  ├─ 符合 → 加入Overlay
  └─ 下次分析时使用"超新"标准
```

### **第1-24小时：超新币阶段**

**特征**：
- 波动极大（±20-50%）
- 流动性不稳定
- 操纵风险最高
- 历史数据极少（10-24根1h K线）

**标准**：
- 概率 ≥ 70%（vs 正常62%）
- 6维 ≥ 70分（vs 正常4维≥65分）
- 单维度门槛70分（vs 正常65分）

**示例**：
```
AIUSDT上线2小时:
  ├─ 数据: 2根1h K线
  ├─ 分析结果:
  │   T=85, M=88, C=82, S=75, V=70, O=68, E=65
  │   6维>=70: 只有4维达标 ❌
  └─ 不发送（虽然概率72%，但维度不够）

上线12小时:
  ├─ 数据: 12根1h K线
  ├─ 分析结果:
  │   T=88, M=85, C=82, S=78, V=72, O=70, E=68
  │   6维>=70: 6维达标 ✅
  │   概率: 74%
  └─ ✅ 发送Telegram 🆕⚡
```

---

### **第1-7天：阶段A**

**特征**：
- 波动仍大（±10-30%）
- 流动性逐渐稳定
- 开始有历史数据（24-168根）
- 技术指标开始可靠

**标准**：
- 概率 ≥ 65%
- 5维 ≥ 65分
- 单维度门槛65分

**示例**：
```
MOVEUSDT上线第3天:
  ├─ 数据: 72根1h K线
  ├─ 分析结果:
  │   T=82, M=78, C=75, S=70, V=68, O=65, E=62
  │   5维>=65: 5维达标 ✅
  │   概率: 68%
  └─ ✅ 发送Telegram 🆕
```

---

### **第7-30天：阶段B**

**特征**：
- 波动正常化（±5-15%）
- 流动性稳定
- 历史数据充足（168-720根）
- 所有指标可靠

**标准**：
- 概率 ≥ 63%
- 4维 ≥ 65分
- 单维度门槛65分

**示例**：
```
VIRTUALUSDT上线第15天:
  ├─ 数据: 360根1h K线
  ├─ 分析结果:
  │   T=78, M=75, C=70, S=68, V=65, O=62, E=60
  │   4维>=65: 5维达标 ✅
  │   概率: 64%
  └─ ✅ 发送Telegram 🆕
```

---

### **第30天+ ：成熟币**

**特征**：
- 正常波动
- 进入Base Pool候选
- 所有数据完整

**标准**：
- 概率 ≥ 62%
- 4维 ≥ 65分
- 允许发送Watch信号

---

## 🔍 **Overlay检测逻辑**

### **代码实现**

```python
def build_overlay():
    for symbol in all_usdt_contracts:
        # 新币快速通道
        if new_coin_enabled:
            k = get_klines(symbol, "1h", 750)
            coin_age_hours = len(k)

            # 1小时-30天 + 高成交额
            if coin_age_hours >= 1 and coin_age_hours <= 720:
                if quote_volume >= 10000000:
                    overlay.append(symbol)  # 直接加入
                    continue  # 跳过三重共振

        # 常规币种三重共振检测...
```

### **检测频率**

- **每小时更新**：Overlay Pool更新时自动检测
- **Crontab**：`0 * * * * python3 tools/update_pools.py --overlay`
- **实时监控**：建议新币上线前1小时手动运行一次

---

## 📉 **数据不足时的处理**

### **问题**

超新币只有10根1h K线，但分析需要：
- EMA30需要30根
- Z24需要800根
- 某些指标无法计算

### **解决方案**

```python
# 降级数据要求
if coin_phase == "ultra_new":
    min_data = 10  # 至少10根
elif coin_phase == "phaseA":
    min_data = 30
else:
    min_data = 50

# 指标降级处理
if len(c) < 30:
    ema30 = _ema(c, len(c))  # 用最大可用周期

if indicator_failed:
    score = 50  # 给中性分
```

---

## ⚠️ **风险控制建议**

### **1. 仓位管理**

| 阶段 | 建议仓位 | 原因 |
|------|---------|-----|
| 超新（1-24h） | **5-10%** | 极高风险，小仓试探 |
| 阶段A（1-7天） | **10-20%** | 高风险，谨慎参与 |
| 阶段B（7-30天） | **20-30%** | 中等风险 |
| 成熟（30天+） | **30-50%** | 正常仓位 |

### **2. 止损优化**

```python
# 超新币更紧止损
if coin_phase == "ultra_new":
    sl_multiplier = 1.5  # vs 正常1.8

# 快速止盈
if coin_phase == "ultra_new":
    tp1_R = 0.8  # vs 正常1.0
    tp2_R_max = 2.0  # vs 正常2.5
```

### **3. 持仓时间**

| 阶段 | 建议持仓时间 | 原因 |
|------|-------------|-----|
| 超新 | **2-6小时** | 快进快出 |
| 阶段A | **6-24小时** | 短线为主 |
| 阶段B | **1-3天** | 中短线 |
| 成熟 | **3-7天** | 正常持仓 |

### **4. 避免的情况**

❌ **不做超新币的情况**：
- 成交额 < 500万USDT（流动性太差）
- 价格已暴涨 > 100%（可能见顶）
- 市场整体恐慌（VIX指数过高）
- 账户资金 < 5000 USDT（经不起波动）

---

## 🛠️ **测试工具**

### **检测新币**

```bash
# 检测全市场1小时-30天的新币
python3 tools/test_new_coin.py

# 输出示例：
# 🆕 检测到 5 个新币
#
# 币种           币龄(小时)    阶段        24h成交额(M)
# ---------------------------------------------------------
# AIUSDT         3            超新        $35.8
# MOVEUSDT       18           超新        $28.3
# VIRTUALUSDT    150 (6.2天)  阶段A       $22.1
# BLESSUSDT      380 (15.8天) 阶段B       $18.5
```

### **分析指定新币**

```bash
# 查看新币详细分析
python3 tools/test_new_coin.py AIUSDT

# 输出示例：
# ======================================================================
# 分析新币: AIUSDT
# ======================================================================
#
# 📊 币种信息：
#    - 币龄: 3.5 小时
#    - 阶段: ultra_new
#    - 新币: 是
#
# 📈 7维分数（long方向）：
#    T: 🟢 85
#    M: 🟢 88
#    C: 🟢 82
#    S: 🟢 75
#    V: 🟢 70
#    O: 🟡 68
#    E: 🟡 65
#
# 🎯 信号质量：
#    - 基础概率: 68.0%
#    - F调节器: 1.15x
#    - 最终概率: 78.2%
#
# 📣 发布判定：
#    - 门槛: 70% + 6维>=70分 (超新币)
#    - 达标维度: 5/7 ❌
#    - 结果: ❌ 未达标（需要6维>=70，实际只有5维）
```

---

## 📱 **Telegram消息标注**

### **超新币信号**

```
🆕⚡ AIUSDT · 现价 1.234
📣 正式 · 🟩 做多 72% · 有效期4h

⚠️ 超新币（上线3小时）- 极高风险
建议仓位: 5-10%，快进快出

六维分析
• 趋势 🟢 85 —— 强势上涨
• 动量 🟢 88 —— 爆发性动量
...

📍 入场: 1.20 - 1.25
🛑 止损: 1.10 (1.5 ATR)
🎯 止盈1: 1.30 (0.8R)
🎯 止盈2: 1.45 (2R)

#trade #AIUSDT #新币
```

### **阶段A/B信号**

```
🆕 MOVEUSDT · 现价 0.85
📣 正式 · 🟩 做多 65% · 有效期8h

新币（上线第5天）- 高风险
建议仓位: 10-20%

六维分析
...
```

---

## 📊 **历史回测建议**

由于新币历史数据少，回测需要特殊处理：

1. **模拟上线场景**：
   - 只使用前10根K线分析
   - 应用超新标准
   - 记录信号质量

2. **性能指标**：
   - 超新币胜率目标：55-60%（vs 成熟币60-70%）
   - 盈亏比要求：2:1以上
   - 最大回撤：单次 < 3%

3. **过滤器**：
   - 排除成交额 < 1000万的
   - 排除上线即暴跌的（操纵币）
   - 只统计存活30天以上的

---

## 🎯 **实战建议**

### **适合做超新币的场景**

✅ **做的情况**：
- 项目背景强（一线交易所首发）
- 开盘不暴涨（< 20%）
- 成交额 > 2000万USDT
- 7维>=70有6维达标
- 信号概率 > 75%

### **观望的情况**

⚠️ **不做的情况**：
- 三线小交易所首发
- 开盘暴涨 > 50%
- 成交额 < 1000万
- 维度达标 < 5个
- 市场整体下跌

### **新币交易纪律**

1. **严格止损**：超新币止损1.5 ATR，绝不扛单
2. **快速止盈**：达到0.8R立即减仓50%
3. **时间止损**：超新币4小时内不触发SL/TP自动平仓
4. **每日限额**：超新币每天最多1个信号
5. **总仓位控制**：所有新币合计 < 20%总资金

---

## 🔧 **配置调优**

### **更激进（适合小资金）**

```json
{
  "new_coin": {
    "ultra_new_prime_prob_min": 0.65,  // 降到65%
    "ultra_new_dims_ok_min": 5,        // 降到5维
    "min_volume_24h": 5000000          // 降到500万
  }
}
```

### **更保守（适合大资金）**

```json
{
  "new_coin": {
    "ultra_new_prime_prob_min": 0.75,  // 提高到75%
    "ultra_new_dims_ok_min": 6,        // 保持6维
    "min_volume_24h": 20000000         // 提高到2000万
  }
}
```

### **关闭超新币（只做7天+）**

```json
{
  "new_coin": {
    "min_hours": 168,  // 改为7天起
    "ultra_new_hours": 0  // 禁用超新阶段
  }
}
```

---

## 📚 **相关文档**

- **docs/COMPLETE_WORKFLOW.md** - 完整系统流程
- **tools/test_new_coin.py** - 新币测试工具
- **config/params.json** - 配置参数

---

## ⚡ **快速开始**

```bash
# 1. 确保新币功能已启用
grep "enabled" config/params.json | grep new_coin

# 2. 更新Overlay Pool（检测新币）
python3 tools/update_pools.py --overlay

# 3. 检测当前新币
python3 tools/test_new_coin.py

# 4. 如果有超新币，立即扫描
python3 tools/full_run_v2_fast.py --send

# 5. 监控日志
tail -f logs/scan.log | grep "🆕"
```

---

**版本**: v3.0 - 超新币支持
**最后更新**: 2025-10-25
**警告**: 超新币风险极高，仅供经验丰富的交易者使用
